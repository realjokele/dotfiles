# install zinit plugins manager
ZINIT_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}/zinit/zinit.git"

# install if doesn't exist
if [ ! -d $ZINIT_HOME ]; then
       	mkdir -p "$(dirname $ZINIT_HOME)"
	git clone https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME"
fi
# source/load zinit
source "${ZINIT_HOME}/zinit.zsh"

# zsh plugins (optimized loading)
zinit wait lucid for \
    zsh-users/zsh-autosuggestions
bindkey '^ ' autosuggest-accept
export ZSH_AUTOSUGGEST_STRATEGY=(history completion)

# Home and End keys
bindkey '^[[H' beginning-of-line    # Home
bindkey '^[[F' end-of-line          # End

# Delete and arrows (just in case)
bindkey '^[[3~' delete-char         # Delete
bindkey '^[[A' up-line-or-history   # Up
bindkey '^[[B' down-line-or-history # Down

bindkey "^R" history-incremental-pattern-search-backward

ISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000

autoload -U compinit && compinit

# Move to directories without cd
setopt autocd

# Add / to ..
zstyle ':completion:*' special-dirs true
zstyle ':completion:*' menu select
zstyle :compinstall filename '/home/joern/.zshrc'
# completion styling
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Za-z}'
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}"

# Initialize completion
autoload -U compinit; compinit

export PATH=$PATH:~/.local/bin

# Configure stow
export STOW_DIR=$HOME/dotfiles
alias stow="stow --dotfiles"

alias ll="ls -l --color=auto"
alias grep="grep --color=auto"
alias n="nvim"
alias vi="nvim"
alias tm="tmuxifier"

# Configure starship
export STARSHIP_CONFIG=$HOME/.config/starship/starship.toml
eval "$(starship init zsh)"

# configure pnpm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# configure pnpm 
export PNPM_HOME="/home/joern/.local/share/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
